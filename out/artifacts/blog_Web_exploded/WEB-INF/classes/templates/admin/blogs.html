<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>博客管理</title>
    <script th:src="@{/js/jquery-3.4.1.js}"></script>
  <link th:href="@{/js/pageAjax.css}" rel="stylesheet">
  <script th:src="@{/js/pageAjax.js}"></script>
    <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js" ></script>
    <link th:href="@{/css/me.css}" rel="stylesheet">
</head>

<body>
    <!-- 导航 -->
  <nav th:insert="admin/fragments::menu(1)"></nav>
<!-- 二级导航 -->
  <div class="ui attached pointing menu">
    <div class="ui container">    
      <a href="" class="item">发布</a>
      <a href="" class="active item">列表</a>
    </div>

  </div>
  <!-- 中间内容 -->
  <div class="m-container-small m-padding-tb-big">
  
    <div class="ui container">
      <form action="#" class="ui segment form">
        <div class="inline fields">
          <div class="field">
          <input type="text" name="title" placeholder="标题">
        </div>
        <div class="field">
          <div class="ui selection dropdown">
            <input type="hidden" name="type">
            <i class="dropdown icon"></i>
            <div class="default text">分类</div>
            <div class="menu">
              <div class="item" data-value="1">错误日志</div>
              <div class="item" data-value="1">日志</div>
              <div class="item" data-value="1">志</div>
            </div>
          </div>
        </div>
        <div class="field">
          <div class="ui checkbox">
            <input type="checkbox" id="recommend" name="recommend">
            <label for="recommend">推荐</label>
          </div>
        </div>
        <div class="field">
          <button class="ui basic mini teal button"><i class="search icon"></i>查询</button>
        </div>
      </div>
      </form>

      <table class="ui table">
        <thead>
          <tr>
            <th></th>
            <th>标题</th>
            <th>类型</th>
            <th>推荐</th>
            <th>更新时间</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody id="blogsList">
<!--          <tr>-->
<!--            <td>0</td>-->
<!--            <td>1</td>-->
<!--            <td>1</td>-->
<!--            <td>1</td>-->
<!--            <td>1</td>-->
<!--            <td><a href="" class="mini ui tea button">编辑</a>-->
<!--              <a href="" class="mini ui tea button">删除</a>-->
<!--            </td>-->
<!--          </tr>-->
        </tbody>
        <tfoot>


          <div id="page"></div>
        </tfoot>
      </table>
     </div>
    </div>
  




  <!-- 底部 -->

  <footer th:insert="admin/fragments::footer"></footer>
</body>

  <script>
 $(".m-control-show").click(function(){
     $('.m-item').toggleClass('m-mobile-hide');
 });

 //下拉注销控制
 $('.ui.dropdown').dropdown({
   on:'hover'
 });
 //分页
    $("#page").paging(
            {
              url:"/admin/list", //ajax请求路由
              nowPage: 1, // 当前页码
              pageNum: 1, // 总页码
              canJump: 1,// 是否能跳转。0=不显示（默认），1=显示
              showOne: 0,//只有一页时，是否显示。0=不显示,1=显示（默认）
              pageSize: 1,
              callback:function (data) {
                //data 即为ajax传递过来的查询数据
                //渲染
                  alert(data);
                $("#blogsList").append( blogHtml(data.list));
              }
            }
    );
    
  //拼接html 渲染数据
  var blogHtml=function (datas) {
      var html="";
      for(var i=1;i<=datas.length;i++) {
          var data=datas[i];
          html += '<tr>' +
              '<td>' + data.blogTitle + '</td>' +
              '<td>' + data.typeName + '</td>' +
              '<td>' + data.isCommend + '</td>' +
              '<td>' + data.updateTime + '</td>' +
              '<td>' + '<a class="mini ui tea button">编辑</a>' + '</td>' +
              '<td>' + '<a class="mini ui tea button">删除</a>' + '</td>'
              + '</tr>';
      }
      return html;
  }    
</script>  

