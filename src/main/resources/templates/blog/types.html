<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head th:insert="/bootstraphtml/fragments::head('分类')"></head>
</head>
<th:block th:insert="/bootstraphtml/fragments::semen-js"></th:block>
<link href="/js/pageAjax.css" rel="stylesheet">
<script src="/js/pageAjax.js"></script>

<body>
    <!-- 导航 -->
    <nav th:insert="/bootstraphtml/fragments::navigation(2)"></nav>
 <input type="hidden" th:value="${activeTypeId}" id="activeTypeId">
  <!-- 中间内容 -->
  <div class="m-container-small m-padding-tb-big">
  
    <div class="ui container">
      <!-- 分类头部 -->
      <div class="ui top attached segment">
        <div class="ui middle aligned two column grid">
          <div class="column">
              <div class="ui teal header">分类</div>
          </div>
          <div class="column right aligned">
                共<h3 class="ui orange header m-inline-block" th:text="${#arrays.length(types)}">14</h3>个
          </div>
        </div>
    </div>
    <div  class="ui attached segment ">
      <div   th:each="typeIndex:${types}"   class="ui labeled  button m-margin-tb-tiny">
        <a th:href="@{/alltypes/{typeid}(typeid=${typeIndex.id})}" class="ui basic  button"   th:classappend="${typeIndex.id==activeTypeId} ?'teal'"   th:text="${typeIndex.name}">思考</a>
        <div class="ui basic  left pointing label"    th:classappend="${typeIndex.id==activeTypeId} ?'teal'"  th:text="${#arrays.length(typeIndex.getBlogList())}">
          24
        </div>
      </div>
    </div>

    <div class="ui top attached teal segment"  id="blogList">


    </div>

<!--        分页-->
    <div class="ui bottom attached segment">
      <div class="ui top attached segment">

        <div id="page"></div>
      </div>
  </div>
  
  </div>

  </div>
  <!-- 底部 -->
    <footer th:insert="/bootstraphtml/fragments::footer"></footer>
</body>

  <script>
 $(".m-control-show").click(function(){
     $('.m-item').toggleClass('m-mobile-hide');
 });


 //分页
 //填充html
 var html="";
 //分页
 $("#page").paging(
     {
         url:"/typeblogs",
         nowPage: 1,
         canJump: 1,
         showOne: 0,
         pageSize: 5,
         search1:$("#activeTypeId").val(), //类型id值
         callback:function (data) {
             data=JSON.parse(data);
             listObj=data.list;
             $("#blogList").empty();
             $("#blogList").append( drawBlogs(listObj));
         }
     }
 );


 //渲染博客页面
 var drawBlogs=function (datas) {
     html="";
     for (var i = 0; i <datas.length ; i++) {
         var data=datas[i];
         html+=
             '<div class="ui padded  vertical segment">'+
             '<div class="ui grid "><div class="eleven wide column ">'+
             '<h3 class="ui header" id="blogTitle">'+ data.blogTitle +'</h3>'+

             '<div class="ui segment" ><div style="width: auto; height: 400;"> <textArea readonly class="comments" rows=5  cols=27   onpropertychange= "this.style.posHeight=this.scrollHeight">'+
             data.description+
             '</textArea> </div> </div>'+

             '<div class="ui grid">'+
             '<div class="eleven wide column">'+
             '<div class=" ui horizontal link list">'+
             '<div class="item">'+
             '<i class="calendar icon"></i>'+data.updateTime+
             '<i class="item eye icon"></i>'+data.viewed+
             '<a class="ui teal basic label m-padded-mini">'+data.typeName+'</a>'+
             '</div>'+
             '</div>'+
             '</div>'+
             '</div>'+
             '</div>'+

             '<div class="five wide column">'+

             '<div class="ui segment " style="width: 100%; height: 100%;">'+
             '<img id="firstPic"  src="'+ data.firstPicture+ '"style="width: 100%; height: 100%;">'+
             '</div>'+
             '</div>'+
             '</div>'+
             '</div>'
     }
     return html;
 }

</script>  

</html>